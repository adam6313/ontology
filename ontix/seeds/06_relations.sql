-- ============================================================
-- OBJECT RELATIONS + OBJECT LINKS (legacy compat)
-- ~40 typed relations showcasing the ontology knowledge graph
-- ============================================================

BEGIN;

-- === object_relations (typed, ontology-aware) ===

-- Product → Brand (belongs_to, relation_type_id=1)
INSERT INTO object_relations (source_id, target_id, relation_type_id, confidence, source) VALUES
('20000000-0000-4000-a000-000000000001', '10000000-0000-4000-a000-000000000001', 1, 1.0, 'system'),  -- B5修復霜 → 理膚寶水
('20000000-0000-4000-a000-000000000002', '10000000-0000-4000-a000-000000000002', 1, 1.0, 'system'),  -- 89火山能量瓶 → 薇姿
('20000000-0000-4000-a000-000000000003', '10000000-0000-4000-a000-000000000003', 1, 1.0, 'system'),  -- 保濕修護乳 → CeraVe
('20000000-0000-4000-a000-000000000004', '10000000-0000-4000-a000-000000000004', 1, 1.0, 'system'),  -- 蝸牛精華 → COSRX
('20000000-0000-4000-a000-000000000005', '10000000-0000-4000-a000-000000000005', 1, 1.0, 'system'),  -- 綠茶籽精華 → innisfree
('20000000-0000-4000-a000-000000000006', '10000000-0000-4000-a000-000000000006', 1, 1.0, 'system'),  -- 木瓜牛奶 → 鬍子茶
('20000000-0000-4000-a000-000000000007', '10000000-0000-4000-a000-000000000007', 1, 1.0, 'system'),  -- 珍珠奶茶 → 茶湯會
('20000000-0000-4000-a000-000000000008', '10000000-0000-4000-a000-000000000001', 1, 1.0, 'system')   -- 淨膚控油潔面乳 → 理膚寶水
ON CONFLICT (source_id, target_id, relation_type_id) DO NOTHING;

-- Brand → Product (has_product, relation_type_id=2)
INSERT INTO object_relations (source_id, target_id, relation_type_id, confidence, source) VALUES
('10000000-0000-4000-a000-000000000001', '20000000-0000-4000-a000-000000000001', 2, 1.0, 'system'),
('10000000-0000-4000-a000-000000000002', '20000000-0000-4000-a000-000000000002', 2, 1.0, 'system'),
('10000000-0000-4000-a000-000000000003', '20000000-0000-4000-a000-000000000003', 2, 1.0, 'system'),
('10000000-0000-4000-a000-000000000004', '20000000-0000-4000-a000-000000000004', 2, 1.0, 'system'),
('10000000-0000-4000-a000-000000000005', '20000000-0000-4000-a000-000000000005', 2, 1.0, 'system'),
('10000000-0000-4000-a000-000000000006', '20000000-0000-4000-a000-000000000006', 2, 1.0, 'system'),
('10000000-0000-4000-a000-000000000007', '20000000-0000-4000-a000-000000000007', 2, 1.0, 'system'),
('10000000-0000-4000-a000-000000000001', '20000000-0000-4000-a000-000000000008', 2, 1.0, 'system')
ON CONFLICT (source_id, target_id, relation_type_id) DO NOTHING;

-- Brand ↔ Brand (competes_with, relation_type_id=3)
INSERT INTO object_relations (source_id, target_id, relation_type_id, confidence, source) VALUES
('10000000-0000-4000-a000-000000000001', '10000000-0000-4000-a000-000000000003', 3, 0.9, 'llm'),  -- 理膚寶水 ↔ CeraVe
('10000000-0000-4000-a000-000000000003', '10000000-0000-4000-a000-000000000001', 3, 0.9, 'llm'),
('10000000-0000-4000-a000-000000000001', '10000000-0000-4000-a000-000000000002', 3, 0.85, 'llm'), -- 理膚寶水 ↔ 薇姿
('10000000-0000-4000-a000-000000000002', '10000000-0000-4000-a000-000000000001', 3, 0.85, 'llm'),
('10000000-0000-4000-a000-000000000004', '10000000-0000-4000-a000-000000000005', 3, 0.8, 'llm'),  -- COSRX ↔ innisfree
('10000000-0000-4000-a000-000000000005', '10000000-0000-4000-a000-000000000004', 3, 0.8, 'llm'),
('10000000-0000-4000-a000-000000000006', '10000000-0000-4000-a000-000000000007', 3, 0.9, 'llm'),  -- 鬍子茶 ↔ 茶湯會
('10000000-0000-4000-a000-000000000007', '10000000-0000-4000-a000-000000000006', 3, 0.9, 'llm'),
('10000000-0000-4000-a000-000000000008', '10000000-0000-4000-a000-000000000009', 3, 0.85, 'llm'), -- 寶雅 ↔ 屈臣氏
('10000000-0000-4000-a000-000000000009', '10000000-0000-4000-a000-000000000008', 3, 0.85, 'llm')
ON CONFLICT (source_id, target_id, relation_type_id) DO NOTHING;

-- Organization → Brand (sub_brand_of / has_sub_brand, relation_type_id=13/14)
INSERT INTO object_relations (source_id, target_id, relation_type_id, confidence, source) VALUES
('10000000-0000-4000-a000-000000000001', '80000000-0000-4000-a000-000000000001', 13, 1.0, 'system'), -- 理膚寶水 sub_brand_of 歐萊雅
('80000000-0000-4000-a000-000000000001', '10000000-0000-4000-a000-000000000001', 14, 1.0, 'system'), -- 歐萊雅 has_sub_brand 理膚寶水
('10000000-0000-4000-a000-000000000002', '80000000-0000-4000-a000-000000000001', 13, 1.0, 'system'), -- 薇姿 sub_brand_of 歐萊雅
('80000000-0000-4000-a000-000000000001', '10000000-0000-4000-a000-000000000002', 14, 1.0, 'system')  -- 歐萊雅 has_sub_brand 薇姿
ON CONFLICT (source_id, target_id, relation_type_id) DO NOTHING;

-- Person → Brand (endorses, relation_type_id=7)
INSERT INTO object_relations (source_id, target_id, relation_type_id, confidence, source) VALUES
('30000000-0000-4000-a000-000000000001', '10000000-0000-4000-a000-000000000001', 7, 0.85, 'llm'), -- Carol凱若 endorses 理膚寶水
('30000000-0000-4000-a000-000000000002', '10000000-0000-4000-a000-000000000003', 7, 0.8, 'llm'),  -- 美妝小安 endorses CeraVe
('30000000-0000-4000-a000-000000000004', '10000000-0000-4000-a000-000000000004', 7, 0.8, 'llm')   -- 痘痘肌研究所 endorses COSRX
ON CONFLICT (source_id, target_id, relation_type_id) DO NOTHING;

-- Brand → Person (endorsed_by, relation_type_id=8)
INSERT INTO object_relations (source_id, target_id, relation_type_id, confidence, source) VALUES
('10000000-0000-4000-a000-000000000001', '30000000-0000-4000-a000-000000000001', 8, 0.85, 'llm'),
('10000000-0000-4000-a000-000000000003', '30000000-0000-4000-a000-000000000002', 8, 0.8, 'llm'),
('10000000-0000-4000-a000-000000000004', '30000000-0000-4000-a000-000000000004', 8, 0.8, 'llm')
ON CONFLICT (source_id, target_id, relation_type_id) DO NOTHING;

-- Person → Organization (founded, relation_type_id=6)
INSERT INTO object_relations (source_id, target_id, relation_type_id, confidence, source) VALUES
('30000000-0000-4000-a000-000000000001', '80000000-0000-4000-a000-000000000002', 6, 0.9, 'llm')  -- Carol凱若 founded 2006hairsalon
ON CONFLICT (source_id, target_id, relation_type_id) DO NOTHING;

-- Organization → Person (founded_by, relation_type_id=5)
INSERT INTO object_relations (source_id, target_id, relation_type_id, confidence, source) VALUES
('80000000-0000-4000-a000-000000000002', '30000000-0000-4000-a000-000000000001', 5, 0.9, 'llm')  -- 2006hairsalon founded_by Carol凱若
ON CONFLICT (source_id, target_id, relation_type_id) DO NOTHING;

-- Person → Topic (discusses, relation_type_id=16)
INSERT INTO object_relations (source_id, target_id, relation_type_id, confidence, source) VALUES
('30000000-0000-4000-a000-000000000001', '50000000-0000-4000-a000-000000000001', 16, 0.9, 'llm'),  -- Carol凱若 discusses 油痘肌護膚
('30000000-0000-4000-a000-000000000001', '50000000-0000-4000-a000-000000000002', 16, 0.95, 'llm'), -- Carol凱若 discusses 美妝教程
('30000000-0000-4000-a000-000000000001', '50000000-0000-4000-a000-000000000007', 16, 0.85, 'llm'), -- Carol凱若 discusses 防曬攻略
('30000000-0000-4000-a000-000000000002', '50000000-0000-4000-a000-000000000002', 16, 0.9, 'llm'),  -- 美妝小安 discusses 美妝教程
('30000000-0000-4000-a000-000000000002', '50000000-0000-4000-a000-000000000004', 16, 0.85, 'llm'), -- 美妝小安 discusses 開架粉底評比
('30000000-0000-4000-a000-000000000002', '50000000-0000-4000-a000-000000000008', 16, 0.85, 'llm'), -- 美妝小安 discusses 平價保養
('30000000-0000-4000-a000-000000000003', '50000000-0000-4000-a000-000000000001', 16, 0.9, 'llm'),  -- 保養日記 discusses 油痘肌護膚
('30000000-0000-4000-a000-000000000003', '50000000-0000-4000-a000-000000000007', 16, 0.85, 'llm'), -- 保養日記 discusses 防曬攻略
('30000000-0000-4000-a000-000000000004', '50000000-0000-4000-a000-000000000001', 16, 0.95, 'llm'), -- 痘痘肌研究所 discusses 油痘肌護膚
('30000000-0000-4000-a000-000000000004', '50000000-0000-4000-a000-000000000008', 16, 0.85, 'llm'), -- 痘痘肌研究所 discusses 平價保養
('30000000-0000-4000-a000-000000000005', '50000000-0000-4000-a000-000000000003', 16, 0.95, 'llm'), -- 穿搭日誌Mia discusses 韓系穿搭
('30000000-0000-4000-a000-000000000005', '50000000-0000-4000-a000-000000000005', 16, 0.8, 'llm'),  -- 穿搭日誌Mia discusses 好物推薦
('30000000-0000-4000-a000-000000000006', '50000000-0000-4000-a000-000000000006', 16, 0.9, 'llm'),  -- 吃貨阿明 discusses 台中美食探店
('30000000-0000-4000-a000-000000000006', '50000000-0000-4000-a000-000000000009', 16, 0.85, 'llm'), -- 吃貨阿明 discusses 夏日飲品推薦
('30000000-0000-4000-a000-000000000007', '50000000-0000-4000-a000-000000000006', 16, 0.9, 'llm'),  -- 台灣美食王 discusses 台中美食探店
('30000000-0000-4000-a000-000000000010', '50000000-0000-4000-a000-000000000010', 16, 0.85, 'llm')  -- 健身教練Sam discusses 健身穿搭
ON CONFLICT (source_id, target_id, relation_type_id) DO NOTHING;

-- Topic → Brand (relevant_to, relation_type_id=18)
INSERT INTO object_relations (source_id, target_id, relation_type_id, confidence, source) VALUES
('50000000-0000-4000-a000-000000000001', '10000000-0000-4000-a000-000000000001', 18, 0.9, 'llm'),  -- 油痘肌護膚 relevant_to 理膚寶水
('50000000-0000-4000-a000-000000000001', '10000000-0000-4000-a000-000000000003', 18, 0.85, 'llm'), -- 油痘肌護膚 relevant_to CeraVe
('50000000-0000-4000-a000-000000000001', '10000000-0000-4000-a000-000000000004', 18, 0.8, 'llm'),  -- 油痘肌護膚 relevant_to COSRX
('50000000-0000-4000-a000-000000000002', '10000000-0000-4000-a000-000000000001', 18, 0.8, 'llm'),  -- 美妝教程 relevant_to 理膚寶水
('50000000-0000-4000-a000-000000000004', '10000000-0000-4000-a000-000000000008', 18, 0.85, 'llm'), -- 開架粉底評比 relevant_to 寶雅
('50000000-0000-4000-a000-000000000008', '10000000-0000-4000-a000-000000000003', 18, 0.85, 'llm'), -- 平價保養 relevant_to CeraVe
('50000000-0000-4000-a000-000000000008', '10000000-0000-4000-a000-000000000004', 18, 0.8, 'llm'),  -- 平價保養 relevant_to COSRX
('50000000-0000-4000-a000-000000000009', '10000000-0000-4000-a000-000000000006', 18, 0.85, 'llm'), -- 夏日飲品推薦 relevant_to 鬍子茶
('50000000-0000-4000-a000-000000000009', '10000000-0000-4000-a000-000000000007', 18, 0.85, 'llm')  -- 夏日飲品推薦 relevant_to 茶湯會
ON CONFLICT (source_id, target_id, relation_type_id) DO NOTHING;

-- === object_links (legacy compat, mirrors key relations) ===

INSERT INTO object_links (source_id, target_id, link_type) VALUES
-- Product → Brand
('20000000-0000-4000-a000-000000000001', '10000000-0000-4000-a000-000000000001', 'belongs_to_brand'),
('20000000-0000-4000-a000-000000000002', '10000000-0000-4000-a000-000000000002', 'belongs_to_brand'),
('20000000-0000-4000-a000-000000000003', '10000000-0000-4000-a000-000000000003', 'belongs_to_brand'),
('20000000-0000-4000-a000-000000000004', '10000000-0000-4000-a000-000000000004', 'belongs_to_brand'),
('20000000-0000-4000-a000-000000000005', '10000000-0000-4000-a000-000000000005', 'belongs_to_brand'),
('20000000-0000-4000-a000-000000000006', '10000000-0000-4000-a000-000000000006', 'belongs_to_brand'),
('20000000-0000-4000-a000-000000000007', '10000000-0000-4000-a000-000000000007', 'belongs_to_brand'),
('20000000-0000-4000-a000-000000000008', '10000000-0000-4000-a000-000000000001', 'belongs_to_brand'),
-- Brand → Brand competition
('10000000-0000-4000-a000-000000000001', '10000000-0000-4000-a000-000000000003', 'competes_with'),
('10000000-0000-4000-a000-000000000001', '10000000-0000-4000-a000-000000000002', 'competes_with'),
('10000000-0000-4000-a000-000000000006', '10000000-0000-4000-a000-000000000007', 'competes_with'),
('10000000-0000-4000-a000-000000000008', '10000000-0000-4000-a000-000000000009', 'competes_with'),
-- Person → Brand endorsement
('30000000-0000-4000-a000-000000000001', '10000000-0000-4000-a000-000000000001', 'endorses'),
('30000000-0000-4000-a000-000000000002', '10000000-0000-4000-a000-000000000003', 'endorses'),
-- Sub-brand
('10000000-0000-4000-a000-000000000001', '80000000-0000-4000-a000-000000000001', 'sub_brand')
ON CONFLICT (source_id, target_id, link_type) DO NOTHING;

COMMIT;
