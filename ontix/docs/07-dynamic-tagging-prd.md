# ç”¢å“éœ€æ±‚æ–‡ä»¶ (PRD)
## Dynamic Tagging System PoC

**ç‰ˆæœ¬**ï¼šv1.3
**æ—¥æœŸ**ï¼š2026-02-03
**ä½œè€…**ï¼šKolr Product Team
**ç‹€æ…‹**ï¼šDraft

> **v1.3 æ›´æ–°**ï¼šæ–°å¢ç¾å¦é ˜åŸŸ Show Case å®Œæ•´ç¯„ä¾‹ (Appendix G)ï¼ŒåŒ…å«å†·å•Ÿå‹•ã€æ­£å¸¸é‹è¡Œã€æ–°è©±é¡Œç™¼ç¾ã€æœå°‹æ•ˆæœå±•ç¤ºã€Demo è…³æœ¬

---

## 1. Executive Summary

### Problem Statement
Kolr å¹³å°ä½¿ç”¨ 278 é¡éœæ…‹ç¡¬æ¨™ç±¤åˆ†é¡ç¤¾ç¾¤è²¼æ–‡ï¼Œé¢è‡¨ä¸‰å¤§å•é¡Œï¼š(1) èªæ„è½å·®å°è‡´å£èªå…§å®¹ç„¡æ³•æ­£ç¢ºåˆ†é¡ã€(2) æ¨™ç±¤é¡†ç²’åº¦éç²—ç„¡æ³•æ”¯æ´ç´°ç·»åˆ†æã€(3) ç³»çµ±ç„¡æ³•è‡ªå‹•æ¼”é€²é©æ‡‰æ–°è©±é¡Œã€‚

### Proposed Solution
å»ºç«‹ Dynamic Tagging ç³»çµ±ï¼Œçµåˆ LLM èªæ„ç†è§£èˆ‡è‡ªå‹•èšé¡æŠ€è¡“ï¼Œå¯¦ç¾ç¡¬æ¨™ç±¤ + è»Ÿæ¨™ç±¤é›™è»Œä¸¦è¡Œï¼Œä¸¦é€éç”¨æˆ¶å›é¥‹æŒçºŒå„ªåŒ–ã€‚

### Business Impact
- ğŸ“ˆ æ¨™ç±¤è¦†è“‹ç‡å¾ 60% æå‡è‡³ 90%+
- ğŸ¯ èªæ„æœå°‹ç›¸é—œæ€§é” 85%+
- ğŸ” è‡ªå‹•ç™¼ç¾æ–°èˆˆè©±é¡Œï¼Œæä¾›å·®ç•°åŒ–ç«¶çˆ­å„ªå‹¢

### Success Metrics

| æŒ‡æ¨™ | ç›®æ¨™å€¼ | é‡æ¸¬æ–¹å¼ |
|-----|-------|---------|
| æ¨™ç±¤ç›¸é—œæ€§ | â‰¥85% | äººå·¥è©•ä¼° 200 ç­†æ¨£æœ¬ |
| æ¨™ç±¤è¦†è“‹ç‡ | â‰¥90% | æœ‰æ¨™ç±¤è²¼æ–‡/ç¸½è²¼æ–‡ |
| èšé¡ä¸€è‡´æ€§ | â‰¥80% | åŒç¾¤çµ„ä¸»é¡Œä¸€è‡´æ€§ |

---

## 2. Problem Definition

### 2.1 Customer Problem (5W1H)

| ç¶­åº¦ | èªªæ˜ |
|-----|------|
| **Who** | å“ç‰Œå®¢æˆ¶ã€è¡ŒéŠ·åˆ†æå¸«ã€Kolr å…§éƒ¨åˆ†æåœ˜éšŠ |
| **What** | ç„¡æ³•å¾ç¤¾ç¾¤è²¼æ–‡ä¸­ç²¾æº–è­˜åˆ¥è¨è«–ä¸»é¡Œèˆ‡æƒ…æ„Ÿ |
| **When** | é€²è¡Œå“ç‰Œè²é‡åˆ†æã€ç«¶å“æ¯”è¼ƒã€è©±é¡Œè¿½è¹¤æ™‚ |
| **Where** | Kolr å¹³å°åˆ†æå ±å‘Šã€æœå°‹åŠŸèƒ½ã€Dashboard |
| **Why** | éœæ…‹æ¨™ç±¤ç„¡æ³•ç†è§£èªæ„ã€é¡†ç²’åº¦ä¸è¶³ã€ç„¡æ³•é€²åŒ– |
| **Impact** | åˆ†æå ±å‘Šä¸å®Œæ•´ã€å®¢æˆ¶åƒ¹å€¼æ„ŸçŸ¥ä½ã€ç«¶çˆ­åŠ›ä¸‹é™ |

### 2.2 Root Cause Analysis (5 Whys)

```
å•é¡Œï¼šç”¨æˆ¶æœå°‹ã€ŒçºŒèˆªå¥½çš„æ‰‹æ©Ÿã€æ‰¾ä¸åˆ°ç›¸é—œè²¼æ–‡
  â”‚
  â”œâ”€ Why 1: è²¼æ–‡æ²’æœ‰è¢«æ¨™ä¸Šã€ŒçºŒèˆªã€æ¨™ç±¤
  â”‚    â”‚
  â”‚    â”œâ”€ Why 2: ç¾æœ‰æ¨™ç±¤ç³»çµ±æ²’æœ‰ã€ŒçºŒèˆªã€é€™å€‹æ¨™ç±¤
  â”‚    â”‚    â”‚
  â”‚    â”‚    â”œâ”€ Why 3: 278 å€‹ç¡¬æ¨™ç±¤ç„¡æ³•æ¶µè“‹æ‰€æœ‰è¨è«–ä¸»é¡Œ
  â”‚    â”‚    â”‚    â”‚
  â”‚    â”‚    â”‚    â”œâ”€ Why 4: æ¨™ç±¤ç³»çµ±æ˜¯éœæ…‹è¨­è¨ˆï¼Œç„¡æ³•å‹•æ…‹æ“´å±•
  â”‚    â”‚    â”‚    â”‚    â”‚
  â”‚    â”‚    â”‚    â”‚    â””â”€ Why 5: ç¼ºä¹èªæ„ç†è§£å’Œè‡ªå‹•ç™¼ç¾æ©Ÿåˆ¶
  â”‚    â”‚    â”‚    â”‚              â†“
  â”‚    â”‚    â”‚    â”‚         ã€æ ¹æœ¬åŸå› ã€‘
```

### 2.3 å¸‚å ´æ©Ÿæœƒ

| é¢å‘ | èªªæ˜ |
|-----|------|
| **ç«¶å“ç¾æ³** | å¤šæ•¸ç«¶å“ä»ä½¿ç”¨é—œéµå­—åŒ¹é…æˆ–éœæ…‹æ¨™ç±¤ |
| **å·®ç•°åŒ–æ©Ÿæœƒ** | èªæ„ç†è§£ + å‹•æ…‹æ¨™ç±¤ = ç¨ç‰¹è³£é» |
| **å¸‚å ´è¶¨å‹¢** | LLM æŠ€è¡“æˆç†Ÿï¼Œæˆæœ¬å¯æ§ |
| **å®¢æˆ¶éœ€æ±‚** | å¤šæ¬¡åæ˜ æ¨™ç±¤ä¸ç²¾æº–ã€æœå°‹æ‰¾ä¸åˆ°å…§å®¹ |

---

## 3. User Personas

### Persona 1: Brand Analyst Alex

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘¤ PERSONA: Alex the Brand Analyst                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ğŸ“ å“ç‰Œå®¢æˆ¶ç«¯çš„è¡ŒéŠ·åˆ†æå¸«ï¼Œæ¯æ—¥ä½¿ç”¨ Kolr è¿½è¹¤å“ç‰Œè²é‡      â”‚
â”‚                                                             â”‚
â”‚  Demographics:                                              â”‚
â”‚  â€¢ å¹´é½¡ï¼š28-35 æ­²                                           â”‚
â”‚  â€¢ è·ä½ï¼šSenior Marketing Analyst                          â”‚
â”‚  â€¢ å…¬å¸ï¼šä¸­å¤§å‹æ¶ˆè²»å“ç‰Œ                                     â”‚
â”‚  â€¢ ä½¿ç”¨é »ç‡ï¼šæ¯æ—¥                                           â”‚
â”‚                                                             â”‚
â”‚  ğŸ¯ Goals:                                                  â”‚
â”‚  â€¢ å¿«é€Ÿäº†è§£å“ç‰Œè¢«è¨è«–çš„ç´°ç¯€ä¸»é¡Œ                             â”‚
â”‚  â€¢ ç™¼ç¾æ¶ˆè²»è€…é—œæ³¨çš„ç”¢å“å±¬æ€§ï¼ˆæŒå¦åº¦ã€é¡¯è‰²åº¦ç­‰ï¼‰             â”‚
â”‚  â€¢ æ¯”è¼ƒç«¶å“åœ¨ç‰¹å®šç¶­åº¦çš„è¡¨ç¾                                 â”‚
â”‚                                                             â”‚
â”‚  ğŸ˜¤ Frustrations:                                           â”‚
â”‚  â€¢ æœå°‹ã€Œå¥½ç”¨ã€æ‰¾ä¸åˆ°ç›¸é—œè©•åƒ¹è²¼æ–‡ (15/20 users)            â”‚
â”‚  â€¢ æ¨™ç±¤å¤ªç²—ï¼Œåªèƒ½çœ‹åˆ°ã€Œå½©å¦ã€ç„¡æ³•ç´°åˆ† (18/20 users)        â”‚
â”‚  â€¢ æ–°ç”¢å“ã€æ–°è©±é¡Œæ²’æœ‰å°æ‡‰æ¨™ç±¤ (12/20 users)                â”‚
â”‚                                                             â”‚
â”‚  ğŸ’¬ Quote:                                                  â”‚
â”‚  "æˆ‘çŸ¥é“æ¶ˆè²»è€…åœ¨è¨è«–æˆ‘å€‘çš„æŒå¦åº¦ï¼Œä½†ç³»çµ±å°±æ˜¯æœä¸åˆ°"         â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Persona 2: Platform Admin Sam

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ‘¤ PERSONA: Sam the Platform Admin                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  ğŸ“ Kolr å…§éƒ¨åˆ†æå¸«ï¼Œè² è²¬ç¶­è­·æ¨™ç±¤ç³»çµ±èˆ‡ç”¢å‡ºåˆ†æå ±å‘Š         â”‚
â”‚                                                             â”‚
â”‚  ğŸ¯ Goals:                                                  â”‚
â”‚  â€¢ æ¸›å°‘æ‰‹å‹•æ¨™ç±¤ç¶­è­·å·¥ä½œ                                     â”‚
â”‚  â€¢ æå‡å ±å‘Šçš„æ´å¯Ÿæ·±åº¦                                       â”‚
â”‚  â€¢ å¿«é€Ÿå›æ‡‰æ–°èˆˆè©±é¡Œéœ€æ±‚                                     â”‚
â”‚                                                             â”‚
â”‚  ğŸ˜¤ Frustrations:                                           â”‚
â”‚  â€¢ æ¯æ¬¡æ–°è©±é¡Œéƒ½è¦æ‰‹å‹•æ–°å¢æ¨™ç±¤ (Pain Severity: High)        â”‚
â”‚  â€¢ ç„¡æ³•è§£é‡‹ç‚ºä½•æŸäº›è²¼æ–‡æ²’è¢«æ¨™åˆ° (Pain Severity: Medium)    â”‚
â”‚  â€¢ æ¨™ç±¤å“è³ªåƒå·®ä¸é½Š (Pain Severity: High)                  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. User Journey Map

### Journey: Brand Analysis Workflow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    User Journey: Brand Voice Analysis                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  Stage      â”‚ Search      â”‚ Filter      â”‚ Analyze     â”‚ Report        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                                                                         â”‚
â”‚  Actions    â”‚ è¼¸å…¥å“ç‰Œ    â”‚ é¸æ“‡æ¨™ç±¤    â”‚ æª¢è¦–è²¼æ–‡    â”‚ åŒ¯å‡ºå ±å‘Š      â”‚
â”‚             â”‚ æˆ–é—œéµå­—    â”‚ ç¸®å°ç¯„åœ    â”‚ çµ±è¨ˆæ•¸æ“š    â”‚ åˆ†äº«åœ˜éšŠ      â”‚
â”‚                                                                         â”‚
â”‚  Emotions   â”‚ ğŸ˜ â†’ ğŸ˜¤     â”‚ ğŸ˜¤          â”‚ ğŸ˜¤ â†’ ğŸ˜      â”‚ ğŸ˜            â”‚
â”‚             â”‚ æœŸå¾…â†’å¤±æœ›   â”‚ é¸é …ä¸è¶³    â”‚ è³‡æ–™ä¸å…¨    â”‚ å ±å‘Šç©ºæ´      â”‚
â”‚                                                                         â”‚
â”‚  Pain Pointsâ”‚ âŒ å£èªæœ   â”‚ âŒ æ¨™ç±¤å¤ª   â”‚ âŒ æ¼æ¨™å¤ª   â”‚ âŒ ç„¡æ³•å‘ˆ     â”‚
â”‚             â”‚ å°‹æ²’çµæœ    â”‚ ç²—ç„¡ç´°åˆ†    â”‚ å¤šç„¡ä»£è¡¨    â”‚ ç¾æ·±åº¦æ´å¯Ÿ    â”‚
â”‚                                                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚                                                                         â”‚
â”‚  Opportunities (With Dynamic Tagging):                                  â”‚
â”‚                                                                         â”‚
â”‚  âœ… èªæ„æœå°‹  â”‚ âœ… è»Ÿæ¨™ç±¤   â”‚ âœ… è¦†è“‹ç‡   â”‚ âœ… æ–°èˆˆè©±   â”‚              â”‚
â”‚  ç†è§£å£èª    â”‚ ç´°ç²’åº¦ç¯©é¸ â”‚ 90%+ å®Œæ•´  â”‚ é¡Œè‡ªå‹•ç™¼ç¾ â”‚              â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. Solution Overview

### 5.1 System Architecture (Streaming)

> **è¨­è¨ˆå‰æ**ï¼šæ¯æ—¥ç´„ 50 è¬ç¯‡è²¼æ–‡æŒçºŒæµå…¥ï¼Œéå›ºå®šæ‰¹æ¬¡è™•ç†

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Dynamic Tagging System (Streaming)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                         Data Ingestion                          â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚   Crawler â”€â”€â–¶ Kafka: posts.raw â”€â”€â–¶ ~500K posts/day              â”‚   â”‚
â”‚  â”‚                      â”‚                                          â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                         â–¼                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚              Flink Job: Three-Layer Filter (Streaming)          â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚  posts.raw â”€â”€â–¶ [L1 Rules] â”€â”€â–¶ [L2 ML] â”€â”€â–¶ [L3 Risk Score]      â”‚   â”‚
â”‚  â”‚                  (Free)      ($0.001)      (è©•ä¼°ç”¨)             â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚  Risk Score åˆ†æµ:                                               â”‚   â”‚
â”‚  â”‚  â”œâ”€ score â‰¥ 70 â”€â”€â–¶ posts.high_value â”€â”€â–¶ é€²å…¥ LLM Tagging       â”‚   â”‚
â”‚  â”‚  â”œâ”€ score 40-70 â”€â”€â–¶ posts.observation â”€â”€â–¶ è§€å¯Ÿæ±                â”‚   â”‚
â”‚  â”‚  â””â”€ score < 40 â”€â”€â–¶ posts.low_value â”€â”€â–¶ åƒ…å­˜ embedding          â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                         â”‚                                              â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚          â–¼              â–¼              â–¼                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚  â”‚ High Value  â”‚ â”‚ Observation â”‚ â”‚ Low Value   â”‚                      â”‚
â”‚  â”‚ (~15%)      â”‚ â”‚ (~30%)      â”‚ â”‚ (~55%)      â”‚                      â”‚
â”‚  â”‚             â”‚ â”‚             â”‚ â”‚             â”‚                      â”‚
â”‚  â”‚ LLM Soft    â”‚ â”‚ åƒ… Embed   â”‚ â”‚ åƒ… Embed   â”‚                      â”‚
â”‚  â”‚ Tagging     â”‚ â”‚ + ç›£æ§äº’å‹• â”‚ â”‚ åŸºç¤å„²å­˜   â”‚                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                      â”‚
â”‚         â”‚               â”‚               â”‚                              â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                         â”‚                                              â”‚
â”‚                         â–¼                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    Storage Layer                                â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚   â”‚
â”‚  â”‚  â”‚   Qdrant    â”‚  â”‚   Redis     â”‚  â”‚ PostgreSQL  â”‚             â”‚   â”‚
â”‚  â”‚  â”‚  (Vectors)  â”‚  â”‚ (Centroids) â”‚  â”‚  (Tags)     â”‚             â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                         â”‚                                              â”‚
â”‚                         â–¼                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                 Clustering Engine (ä¸‰å±¤æ©Ÿåˆ¶)                    â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚  Layer 1: Real-time Assignment (æ¯ç¯‡è²¼æ–‡)                       â”‚   â”‚
â”‚  â”‚  â”œâ”€ æ¯”å° Redis Centroid åº«                                      â”‚   â”‚
â”‚  â”‚  â”œâ”€ similarity â‰¥ 0.75 â†’ å³æ™‚æ­¸é¡                               â”‚   â”‚
â”‚  â”‚  â””â”€ similarity < 0.75 â†’ é€å…¥ Pending Pool                      â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚  Layer 2: Micro-batch Discovery (æ¯å°æ™‚ or 5000ç¯‡)             â”‚   â”‚
â”‚  â”‚  â”œâ”€ å° Pending Pool åŸ·è¡Œ HDBSCAN                               â”‚   â”‚
â”‚  â”‚  â”œâ”€ ç™¼ç¾æ–° Cluster â†’ LLM å‘½å                                  â”‚   â”‚
â”‚  â”‚  â””â”€ æ›´æ–° Centroid åº«                                           â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â”‚  Layer 3: Global Re-clustering (æ¯æ—¥ 03:00)                    â”‚   â”‚
â”‚  â”‚  â”œâ”€ æŠ½æ¨£ 7 å¤©è³‡æ–™ (10% â‰ˆ 35è¬ç¯‡)                               â”‚   â”‚
â”‚  â”‚  â”œâ”€ Full HDBSCAN + BERTopic                                    â”‚   â”‚
â”‚  â”‚  â”œâ”€ åˆä½µ/åˆ†è£‚ Cluster                                          â”‚   â”‚
â”‚  â”‚  â””â”€ æª¢æ¸¬ Trending/Declining                                    â”‚   â”‚
â”‚  â”‚                                                                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2 Streaming Cost Model (æ¯æ—¥ 50 è¬ç¯‡)

| è™•ç†éšæ®µ | æ¯”ä¾‹ | æ•¸é‡ | å–®åƒ¹ | æ—¥æˆæœ¬ |
|---------|------|------|------|--------|
| L1 Rules éæ¿¾ | 100% | 500K | Free | $0 |
| L2 ML è©•ä¼° | 75% | 375K | Free (local) | $0 |
| L3 Embedding | 60% | 300K | Free (MiniLM) | $0 |
| LLM Soft Tagging | 15% | 75K | $0.00004 | $3.00 |
| Cluster å‘½å | - | ~50/day | $0.01 | $0.50 |
| **æ—¥ç¸½æˆæœ¬** | | | | **~$3.50** |
| **æœˆç¸½æˆæœ¬** | | | | **~$105** |

### 5.3 Clustering Implementation

#### 5.3.1 ä¸‰å±¤ Clustering æ©Ÿåˆ¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Streaming Clustering Architecture               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Layer 1: Real-time Assignment (æ¯«ç§’ç´š)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  æ–°è²¼æ–‡ â†’ Embedding â†’ æ¯”å° Redis Centroid åº«            â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚  if similarity â‰¥ 0.75:                                  â”‚   â”‚
â”‚  â”‚      â†’ å³æ™‚æ­¸å…¥ç¾æœ‰ Cluster                             â”‚   â”‚
â”‚  â”‚  else:                                                  â”‚   â”‚
â”‚  â”‚      â†’ æ”¾å…¥ Kafka: clustering.pending                   â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚  é æœŸ: 70-80% è²¼æ–‡å¯å³æ™‚æ­¸é¡                           â”‚   â”‚
â”‚  â”‚  å»¶é²: < 10ms/post                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â†“                                  â”‚
â”‚  Layer 2: Micro-batch Discovery (æ¯å°æ™‚)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  è§¸ç™¼æ¢ä»¶: Pending Pool â‰¥ 5000 ç¯‡ OR æ¯å°æ™‚å®šæ™‚         â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚  Process:                                               â”‚   â”‚
â”‚  â”‚  1. å° Pending Pool åŸ·è¡Œ HDBSCAN                       â”‚   â”‚
â”‚  â”‚  2. min_cluster_size = 50                              â”‚   â”‚
â”‚  â”‚  3. æ–° Cluster â†’ æª¢æŸ¥æ˜¯å¦èˆ‡ç¾æœ‰é‡ç–Š (threshold=0.8)    â”‚   â”‚
â”‚  â”‚  4. ä¸é‡ç–Š â†’ LLM ç”Ÿæˆåç¨± + é—œéµè©                     â”‚   â”‚
â”‚  â”‚  5. æ–°å¢è‡³ Centroid åº«                                 â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚  åŸ·è¡Œæ™‚é–“: ~10 ç§’ / 5000 ç¯‡                            â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â†“                                  â”‚
â”‚  Layer 3: Global Re-clustering (æ¯æ—¥ 03:00)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  Process:                                               â”‚   â”‚
â”‚  â”‚  1. æŠ½æ¨£æœ€è¿‘ 7 å¤©è³‡æ–™ (10% â‰ˆ 35 è¬ç¯‡)                  â”‚   â”‚
â”‚  â”‚  2. Full HDBSCAN + BERTopic ä¸»é¡Œå»ºæ¨¡                   â”‚   â”‚
â”‚  â”‚  3. åˆä½µç›¸ä¼¼ Cluster (similarity > 0.85)               â”‚   â”‚
â”‚  â”‚  4. åˆ†è£‚éå¤§ Cluster                                   â”‚   â”‚
â”‚  â”‚  5. æ›´æ–°æ‰€æœ‰ Centroid                                  â”‚   â”‚
â”‚  â”‚  6. æª¢æ¸¬ç‹€æ…‹è®ŠåŒ– (Trending/Declining)                  â”‚   â”‚
â”‚  â”‚                                                         â”‚   â”‚
â”‚  â”‚  åŸ·è¡Œæ™‚é–“: ~12 åˆ†é˜                                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 5.3.2 Cluster ç”Ÿå‘½é€±æœŸ

```
[EMERGING]  â”€â”€â”€â”€â”€â”€â†’  [ACTIVE]  â”€â”€â”€â”€â”€â”€â†’  [STABLE]
    â†‘                   â”‚                   â”‚
    â”‚                   â†“                   â†“
micro-batch         æŒçºŒæœ‰æ–°      é€£çºŒ 7 å¤©
ç™¼ç¾                è²¼æ–‡åŠ å…¥      ç„¡é¡¯è‘—å¢é•·

                   [TRENDING]
                       â†‘
                  24hr æˆé•·
                  > 200%

[STABLE] â”€â”€â”€â”€â”€â”€â†’ [DECLINING] â”€â”€â”€â”€â”€â”€â†’ [ARCHIVED]
         7å¤©ç„¡æ–°è²¼æ–‡      30å¤©ç„¡æ–°è²¼æ–‡
```

| ç‹€æ…‹ | æ¢ä»¶ | è™•ç†æ–¹å¼ |
|------|------|----------|
| EMERGING | æ–°ç™¼ç¾ï¼Œsize < 500 | ç¹¼çºŒè§€å¯Ÿï¼Œä¸å°å¤–é¡¯ç¤º |
| ACTIVE | size â‰¥ 500ï¼ŒæŒçºŒæœ‰æ–°è²¼æ–‡ | æ­£å¼ Clusterï¼Œåƒèˆ‡æœå°‹ |
| TRENDING | 24hr æˆé•· > 200% | ğŸš¨ Alert æ¨é€çµ¦åˆ†æå¸« |
| STABLE | 7 å¤©ç„¡é¡¯è‘—æˆé•· | æ­£å¸¸ Cluster |
| DECLINING | 7 å¤©ç„¡æ–°è²¼æ–‡ | é™ä½æ¬Šé‡ |
| ARCHIVED | 30 å¤©ç„¡æ–°è²¼æ–‡ | å¾ Centroid åº«ç§»é™¤ |

#### 5.3.3 Cluster â†’ SoftTag è½‰æ›

ç•¶ Cluster é”åˆ° **TRENDING** ç‹€æ…‹ï¼Œç³»çµ±è‡ªå‹•è©•ä¼°æ˜¯å¦å»ºç«‹ç‚ºæ­£å¼ SoftTagï¼š

```
TRENDING Cluster
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LLM è©•ä¼°:                          â”‚
â”‚  1. æ˜¯å¦ç‚ºæŒçºŒæ€§è©±é¡Œï¼Ÿ(vs ä¸€æ¬¡æ€§)   â”‚
â”‚  2. èˆ‡ç¾æœ‰ HardTag çš„é—œä¿‚ï¼Ÿ         â”‚
â”‚  3. å»ºè­°çš„æ¨™ç±¤å±¤ç´šçµæ§‹              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼ (confidence > 0.8)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å»ºç«‹ SoftTag:                      â”‚
â”‚  - name: "å¤šå·´èƒºå¦"                 â”‚
â”‚  - parent_hard_tag: "ç¾å¦"          â”‚
â”‚  - source_cluster: cluster_0089    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â–¼
  Ontology æ›´æ–°:
  Post --[has_soft_tag]--> SoftTag("å¤šå·´èƒºå¦")
          â†‘
  å¾ŒçºŒåŒé¡è²¼æ–‡è‡ªå‹•ç²å¾—æ­¤æ¨™ç±¤
```

#### 5.3.4 Clustering æˆæœ¬ä¼°ç®—

| è™•ç†éšæ®µ | è¨ˆç®—é‡ | æˆæœ¬ |
|----------|--------|------|
| Layer 1 å³æ™‚åˆ†é… | 50è¬æ¬¡ Redis æŸ¥è©¢ | ~$0 |
| Layer 2 å¾®æ‰¹æ¬¡ | ~24 æ¬¡/å¤© HDBSCAN | ~$0 (CPU) |
| Layer 3 é‡èšé¡ | 35 è¬ç¯‡ HDBSCAN | ~$0 (CPU) |
| Cluster å‘½å | ~50 å€‹/å¤© Ã— LLM | ~$0.50 |
| **æ—¥ç¸½æˆæœ¬** | | **~$0.50** |

### 5.4 å–®ç¯‡è²¼æ–‡è™•ç†æµç¨‹

ä»¥ä¸‹å±•ç¤ºä¸€ç¯‡è²¼æ–‡å¾é€²å…¥ç³»çµ±åˆ°å®Œæˆè™•ç†çš„å®Œæ•´æµç¨‹ã€‚

#### 5.4.1 ç¯„ä¾‹è²¼æ–‡

```
"é€™å€‹æ°£å¢ŠçœŸçš„è¶…æŒå¦ï¼æ—©ä¸ŠåŒ–å¦åˆ°ä¸‹ç­éƒ½ä¸è„«å¦ï¼Œæ²¹è‚Œæ¨ ğŸ‘"
- å¹³å°: Instagram
- è®šæ•¸: 89
- ç•™è¨€: 12
```

#### 5.4.2 è™•ç†æ™‚é–“ç·š

```
æ™‚é–“è»¸ (æ¯«ç§’)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶

0ms     1ms      3ms            53ms           54ms          254ms
â”‚       â”‚        â”‚               â”‚              â”‚              â”‚
â–¼       â–¼        â–¼               â–¼              â–¼              â–¼
â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ S1 â”‚ â”‚ S2 â”‚ â”‚  S3   â”‚ â”‚     S4       â”‚ â”‚    S5    â”‚ â”‚    S6    â”‚
â”‚    â”‚ â”‚    â”‚ â”‚       â”‚ â”‚              â”‚ â”‚          â”‚ â”‚          â”‚
â”‚Kafkaâ”‚ â”‚Ruleâ”‚ â”‚ Risk  â”‚ â”‚  Embedding   â”‚ â”‚ Cluster  â”‚ â”‚   LLM    â”‚
â”‚ å¯«å…¥â”‚ â”‚éæ¿¾â”‚ â”‚ Score â”‚ â”‚   (gRPC)     â”‚ â”‚  æ¯”å°    â”‚ â”‚  Tags    â”‚
â”‚    â”‚ â”‚    â”‚ â”‚       â”‚ â”‚              â”‚ â”‚          â”‚ â”‚          â”‚
â”‚ Go â”‚ â”‚ Go â”‚ â”‚  Go   â”‚ â”‚   Python     â”‚ â”‚   Go     â”‚ â”‚   API    â”‚
â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                         æœ€è€—æ™‚æ­¥é©Ÿ
                       (å¯æ‰¹æ¬¡å„ªåŒ–)
```

#### 5.4.3 å„æ­¥é©Ÿè©³è§£

**Step 1: Kafka å¯«å…¥ (0ms)**
```json
{
  "id": "post_12345",
  "content": "é€™å€‹æ°£å¢ŠçœŸçš„è¶…æŒå¦ï¼æ—©ä¸ŠåŒ–å¦åˆ°ä¸‹ç­éƒ½ä¸è„«å¦ï¼Œæ²¹è‚Œæ¨ ğŸ‘",
  "author": "beauty_lover",
  "likes": 89,
  "comments": 12,
  "platform": "instagram"
}
```

**Step 2: Rules Filter (1ms)**
```
æª¢æŸ¥é …ç›®:
â”œâ”€ æŠ½çæ–‡ï¼Ÿ    â†’ No âœ“
â”œâ”€ å»£å‘Šæ–‡ï¼Ÿ    â†’ No âœ“
â”œâ”€ å­—æ•¸ > 20ï¼Ÿ â†’ Yes (38å­—) âœ“
â””â”€ çµæœ: PASS
```

**Step 3: Risk Score (2ms)**
```
åŸºç¤åˆ†:                    50
+ å…§å®¹é•·åº¦ > 50 å­—:       +10
+ è®šæ•¸ > 50:              +10
+ ç•™è¨€ > 10:              +10
+ æœ‰å…·é«”æè¿°è©:           +10
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ç¸½åˆ†:                      90 â†’ High Value (â‰¥70)
```

**Step 4: Embedding (50ms)**
```python
# gRPC å‘¼å« Python ML Service
embedding = model.encode("é€™å€‹æ°£å¢ŠçœŸçš„è¶…æŒå¦...")
# è¼¸å‡º: [0.23, -0.15, 0.87, ...] (384 ç¶­)
```

**Step 5: Cluster åˆ†é… (1ms)**
```
Centroid æ¯”å°çµæœ:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Cluster        â”‚ Similarity   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ "æŒå¦æ¸¬è©¦"     â”‚ 0.89 âœ“ æœ€é«˜  â”‚
â”‚ "åº•å¦æ¨è–¦"     â”‚ 0.76         â”‚
â”‚ "æ§æ²¹æŠ€å·§"     â”‚ 0.71         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
0.89 â‰¥ 0.75 â†’ æ­¸å…¥ "æŒå¦æ¸¬è©¦"
```

**Step 6: LLM Soft Tagging (200ms)**
```json
// GPT-4o-mini å›è¦†
{
  "soft_tags": ["æŒå¦", "æ°£å¢Šç²‰é¤…", "æ²¹è‚Œé©ç”¨", "æ­£é¢è©•åƒ¹"],
  "sentiment": "positive",
  "product_type": "æ°£å¢Šç²‰é¤…"
}
```

**Step 7: å¯«å…¥å„²å­˜ (10ms)**
```
ä¸¦è¡Œå¯«å…¥:
â”œâ”€ Qdrant:     å‘é‡ + cluster_id âœ“
â”œâ”€ PostgreSQL: soft_tags + hard_tags âœ“
â””â”€ Redis:      æ›´æ–° cluster çµ±è¨ˆ âœ“
```

#### 5.4.4 ä¸åŒ Risk Score çš„è™•ç†è·¯å¾‘

| Risk Score | æ¯”ä¾‹ | Embedding | Cluster | LLM Tags | ç¸½å»¶é² |
|------------|------|-----------|---------|----------|--------|
| **â‰¥ 70** (High) | 15% | âœ… | âœ… | âœ… | ~264ms |
| **40-70** (Mid) | 30% | âœ… | âœ… | âŒ | ~64ms |
| **< 40** (Low) | 55% | âœ… | âŒ | âŒ | ~54ms |

#### 5.4.5 è™•ç†çµæœ

```json
{
  "post_id": "post_12345",

  "processing": {
    "risk_score": 90,
    "path": "high_value",
    "latency_ms": 264
  },

  "clustering": {
    "cluster_id": "cluster_023",
    "cluster_name": "æŒå¦æ¸¬è©¦",
    "similarity": 0.89
  },

  "tagging": {
    "hard_tags": ["ç¾å¦", "å½©å¦"],
    "soft_tags": ["æŒå¦", "æ°£å¢Šç²‰é¤…", "æ²¹è‚Œé©ç”¨"],
    "sentiment": "positive"
  },

  "searchable_by": [
    "æŒå¦ æ¨è–¦",
    "æ°£å¢Š æ²¹è‚Œ",
    "ä¸è„«å¦ åº•å¦",
    "æ§æ²¹ ç²‰é¤…"
  ]
}
```

### 5.5 Scope Definition

#### In Scope (PoC)

| åŠŸèƒ½ | å„ªå…ˆç´š | èªªæ˜ |
|-----|-------|------|
| Dynamic Tagging | P0 | ç¡¬æ¨™ç±¤ + è»Ÿæ¨™ç±¤é›™è»Œä¸¦è¡Œ |
| Semantic Search | P0 | èªæ„æœå°‹ API |
| Basic Clustering | P1 | HDBSCAN ä¸»é¡Œèšé¡ |
| Data Pipeline | P0 | ä¸‰å±¤éæ¿¾ + Embedding |

#### Out of Scope (PoC)

| åŠŸèƒ½ | åŸå›  | å¾ŒçºŒè¦åŠƒ |
|-----|------|---------|
| Continue Training | è¤‡é›œåº¦é«˜ï¼Œéœ€å…ˆé©—è­‰åŸºç¤åŠŸèƒ½ | Phase 1 |
| å…¨é ˜åŸŸæ“´å±• | å…ˆé©—è­‰å½©å¦é ˜åŸŸå¯è¡Œæ€§ | Phase 2 |
| ç”Ÿç”¢ç’°å¢ƒéƒ¨ç½² | PoC éšæ®µèšç„¦é©—è­‰ | Phase 2 |
| Admin UI | å¯ç”¨ Notebook æ›¿ä»£ | Phase 1 |

---

## 6. User Stories & Acceptance Criteria

### Epic: Dynamic Tagging PoC

```
Epic: Dynamic Tagging System PoC
â”œâ”€â”€ US-001: èªæ„æœå°‹ (8 pts) - P0
â”œâ”€â”€ US-002: è»Ÿæ¨™ç±¤ç”Ÿæˆ (5 pts) - P0
â”œâ”€â”€ US-003: ç¡¬æ¨™ç±¤æ˜ å°„ (3 pts) - P0
â”œâ”€â”€ US-004: è³‡æ–™éæ¿¾ Pipeline (5 pts) - P0
â”œâ”€â”€ US-005: ä¸»é¡Œèšé¡ - Streaming (8 pts) - P1 â† updated
â”œâ”€â”€ US-006: æ¨™ç±¤å›é¥‹æ©Ÿåˆ¶ (3 pts) - P2
â””â”€â”€ US-007: æ•ˆèƒ½å„ªåŒ– (3 pts) - P1
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Total: 35 story points
```

### US-001: èªæ„æœå°‹

```
As a å“ç‰Œåˆ†æå¸«,
I want to ç”¨å£èªåŒ–çš„æ–¹å¼æœå°‹è²¼æ–‡ï¼ˆå¦‚ã€ŒçºŒèˆªå¥½ã€ã€Œå¾ˆæŒå¦ã€ï¼‰,
So that æˆ‘èƒ½æ‰¾åˆ°æ‰€æœ‰èªæ„ç›¸é—œçš„è²¼æ–‡ï¼Œä¸å—é™æ–¼é—œéµå­—åŒ¹é….

Acceptance Criteria:

Given ç”¨æˆ¶è¼¸å…¥ã€ŒçºŒèˆªå¥½çš„æ‰‹æ©Ÿã€
When ç³»çµ±åŸ·è¡Œèªæ„æœå°‹
Then è¿”å›æ‰€æœ‰è¨è«–æ‰‹æ©ŸçºŒèˆªçš„è²¼æ–‡ï¼ˆåŒ…å«ã€Œä¸ç”¨å¸¶å°¿è¢‹ã€ã€Œé›»é‡æ’æ•´å¤©ã€ç­‰è¡¨è¿°ï¼‰
And ç›¸é—œæ€§æ’åºåœ¨å‰ 10 åçš„æº–ç¢ºç‡ â‰¥85%

Given ç”¨æˆ¶è¼¸å…¥ã€ŒæŒå¦åº•å¦æ¨è–¦ã€
When ç³»çµ±åŸ·è¡Œèªæ„æœå°‹
Then è¿”å›è¨è«–åº•å¦æŒå¦åº¦çš„è²¼æ–‡
And çµæœåŒ…å«ä¸åŒè¡¨è¿°ï¼ˆã€Œæ§æ²¹ã€ã€Œä¸è„«å¦ã€ã€Œä¸€æ•´å¤©ä¸æš—æ²‰ã€ï¼‰

Given æœå°‹è«‹æ±‚
When ç³»çµ±è™•ç†æŸ¥è©¢
Then å›æ‡‰å»¶é² <500ms (P95)

Story Points: 8
Priority: P0
```

### US-002: è»Ÿæ¨™ç±¤ç”Ÿæˆ

```
As a ç³»çµ±ç®¡ç†å“¡,
I want to ç³»çµ±è‡ªå‹•ç‚ºè²¼æ–‡ç”Ÿæˆç´°ç²’åº¦è»Ÿæ¨™ç±¤,
So that è²¼æ–‡å¯ä»¥è¢«æ›´ç²¾æº–åœ°åˆ†é¡å’Œç¯©é¸.

Acceptance Criteria:

Given ä¸€ç¯‡è¨è«–ç²‰åº•çš„è²¼æ–‡
When ç³»çµ±è™•ç†æ¨™ç±¤
Then ç”Ÿæˆè»Ÿæ¨™ç±¤åŒ…å«ï¼š
  - ç”¢å“é¡å‹ï¼šç²‰åº•æ¶²ã€æ°£å¢Šç²‰é¤…...
  - åŠŸæ•ˆå±¬æ€§ï¼šæŒå¦ã€é®ç‘•ã€æ§æ²¹ã€ä¿æ¿•...
  - æƒ…æ„Ÿè©•åƒ¹ï¼šæ¨è–¦ã€è¸©é›·ã€å›è³¼...
And æ¯å€‹æ¨™ç±¤æœ‰ confidence score

Given æ‰¹æ¬¡è™•ç† 1000 ç¯‡è²¼æ–‡
When ç³»çµ±åŸ·è¡Œæ¨™ç±¤
Then è™•ç†æ™‚é–“ <5 åˆ†é˜
And æ¨™ç±¤è¦†è“‹ç‡ â‰¥90%

Story Points: 5
Priority: P0
```

### US-003: ç¡¬æ¨™ç±¤æ˜ å°„

```
As a ç³»çµ±ç®¡ç†å“¡,
I want to è»Ÿæ¨™ç±¤èƒ½è‡ªå‹•æ˜ å°„å›ç¾æœ‰ 278 é¡ç¡¬æ¨™ç±¤,
So that æ–°èˆŠç³»çµ±å¯ä»¥ä¸¦è¡Œé‹ä½œï¼Œç¢ºä¿å‘å¾Œç›¸å®¹.

Acceptance Criteria:

Given è»Ÿæ¨™ç±¤ã€ŒæŒå¦åº¦ã€ã€Œåº•å¦ã€ã€Œç²‰åº•ã€
When ç³»çµ±åŸ·è¡Œæ˜ å°„
Then æ­£ç¢ºæ˜ å°„åˆ°ç¡¬æ¨™ç±¤ã€Œå½©å¦ã€
And ä¿ç•™åŸå§‹è»Ÿæ¨™ç±¤ä¾›ç´°ç²’åº¦æŸ¥è©¢

Given ä¸€å€‹ç„¡æ³•æ˜ å°„çš„è»Ÿæ¨™ç±¤
When ç³»çµ±åŸ·è¡Œæ˜ å°„
Then æ¨™è¨˜ç‚ºã€Œå¾…å¯©æ ¸ã€
And è¨˜éŒ„åˆ°æ–°æ¨™ç±¤å€™é¸æ¸…å–®

Story Points: 3
Priority: P0
```

### US-004: è³‡æ–™éæ¿¾ Pipeline

```
As a ç³»çµ±ç®¡ç†å“¡,
I want to è‡ªå‹•éæ¿¾ä½åƒ¹å€¼è²¼æ–‡ï¼ˆæŠ½çã€å»£å‘Šã€åƒåœ¾å…§å®¹ï¼‰,
So that æ¨™ç±¤ç³»çµ±åªè™•ç†æœ‰åˆ†æåƒ¹å€¼çš„å…§å®¹.

Acceptance Criteria:

Given 10,000 ç¯‡åŸå§‹è²¼æ–‡
When ç¶“éä¸‰å±¤éæ¿¾
Then Layer 1 (Rules): éæ¿¾æŠ½çã€ç´”å»£å‘Šã€æ¥µçŸ­å…§å®¹
And Layer 2 (ML): éæ¿¾é‡è¤‡ã€ä½èªæ„å¯†åº¦
And Layer 3 (LLM): è©•ä¼°å…§å®¹å“è³ªèˆ‡é ˜åŸŸç›¸é—œæ€§
And æœ€çµ‚ä¿ç•™ç‡ç´„ 55% (5,500 ç¯‡)

Given éæ¿¾å¾Œçš„è²¼æ–‡
When äººå·¥æŠ½æ¨£é©—è­‰ 100 ç¯‡
Then æœ‰åƒ¹å€¼è²¼æ–‡ä½”æ¯” â‰¥90%

Story Points: 5
Priority: P0
```

### US-005: ä¸»é¡Œèšé¡ (Streaming)

```
As a å“ç‰Œåˆ†æå¸«,
I want to ç³»çµ±è‡ªå‹•ç™¼ç¾æ–°èˆˆè¨è«–ä¸»é¡Œ,
So that æˆ‘èƒ½åŠæ™‚æŒæ¡å¸‚å ´è¶¨å‹¢.

Acceptance Criteria:

ã€å³æ™‚åˆ†é…ã€‘
Given ä¸€ç¯‡æ–°è²¼æ–‡é€²å…¥ç³»çµ±
When ç³»çµ±åŸ·è¡Œ Centroid æ¯”å°
Then å»¶é² < 10ms
And 70-80% è²¼æ–‡å¯å³æ™‚æ­¸é¡åˆ°ç¾æœ‰ Cluster

ã€æ–°ä¸»é¡Œç™¼ç¾ã€‘
Given Pending Pool ç´¯ç© 5000 ç¯‡è²¼æ–‡
When ç³»çµ±åŸ·è¡Œå¾®æ‰¹æ¬¡ HDBSCAN
Then å¯ç™¼ç¾ 2-5 å€‹æ–°èˆˆ Cluster
And æ¯å€‹ Cluster æœ‰ LLM ç”Ÿæˆçš„åç¨±å’Œé—œéµè©
And æ–°ä¸»é¡Œç™¼ç¾å»¶é² â‰¤ 1 å°æ™‚

ã€è¶¨å‹¢åµæ¸¬ã€‘
Given Cluster çš„ 24hr è²¼æ–‡æˆé•· > 200%
When ç³»çµ±åŸ·è¡Œç‹€æ…‹è©•ä¼°
Then è‡ªå‹•æ¨™è¨˜ç‚º TRENDING
And ç™¼é€ Alert çµ¦åˆ†æå¸«

ã€èšé¡å“è³ªã€‘
Given æ¯æ—¥é‡èšé¡çµæœ
When äººå·¥è©•ä¼°æŠ½æ¨£ 10 å€‹ Cluster
Then èšé¡ä¸€è‡´æ€§ â‰¥80%
And æœªåˆ†é¡ (noise) æ¯”ä¾‹ <15%

ã€è‡ªå‹•é€²åŒ–ã€‘
Given TRENDING Cluster æŒçºŒ 3 å¤©ä»¥ä¸Š
When LLM è©•ä¼° confidence > 0.8
Then è‡ªå‹•å»ºç«‹ç‚ºæ­£å¼ SoftTag
And å¾ŒçºŒç›¸é—œè²¼æ–‡è‡ªå‹•ç²å¾—æ­¤æ¨™ç±¤

Story Points: 8 (updated from 5)
Priority: P1
```

---

## 7. RICE Prioritization

| Feature | Reach | Impact | Confidence | Effort | RICE Score | Priority |
|---------|-------|--------|------------|--------|------------|----------|
| èªæ„æœå°‹ | 5000 | Massive (3x) | High (1.0) | L (8) | 1875 | P0 |
| è»Ÿæ¨™ç±¤ç”Ÿæˆ | 5000 | High (2x) | High (1.0) | M (5) | 2000 | P0 |
| ç¡¬æ¨™ç±¤æ˜ å°„ | 5000 | Medium (1x) | High (1.0) | S (3) | 1667 | P0 |
| è³‡æ–™éæ¿¾ | 5000 | High (2x) | Medium (0.8) | M (5) | 1600 | P0 |
| ä¸»é¡Œèšé¡ (Streaming) | 3000 | High (2x) | Medium (0.8) | L (8) | 600 | P1 |
| æ¨™ç±¤å›é¥‹ | 2000 | Medium (1x) | Low (0.5) | S (3) | 333 | P2 |

---

## 8. OKRs (Strategic Alignment)

### Company OKR
**O**: æå‡å¹³å°åˆ†æèƒ½åŠ›ï¼Œå¢åŠ å®¢æˆ¶åƒ¹å€¼æ„ŸçŸ¥

### Product OKR (Cascade)

```
ğŸ“Œ PO-1: æå‡æ¨™ç±¤ç³»çµ±èªæ„ç†è§£èƒ½åŠ›
   â”œâ”€â”€ KR1: èªæ„æœå°‹ç›¸é—œæ€§é” 85%+
   â”œâ”€â”€ KR2: æ¨™ç±¤è¦†è“‹ç‡å¾ 60% æå‡è‡³ 90%+
   â””â”€â”€ KR3: å®Œæˆå½©å¦é ˜åŸŸ PoC é©—è­‰

ğŸ“Œ PO-2: å»ºç«‹è‡ªå‹•åŒ–è©±é¡Œç™¼ç¾æ©Ÿåˆ¶
   â”œâ”€â”€ KR1: èšé¡ä¸€è‡´æ€§é” 80%+
   â”œâ”€â”€ KR2: æœªåˆ†é¡æ¯”ä¾‹é™è‡³ 15% ä»¥ä¸‹
   â””â”€â”€ KR3: ç”¢å‡ºå½©å¦é ˜åŸŸ Top 20 è¨è«–ä¸»é¡Œ

ğŸ“Œ PO-3: æ§åˆ¶ç³»çµ±æˆæœ¬åœ¨å¯æ¥å—ç¯„åœ
   â”œâ”€â”€ KR1: æ¯ç¯‡è²¼æ–‡è™•ç†æˆæœ¬ <$0.001
   â”œâ”€â”€ KR2: ç¸½ PoC æˆæœ¬ <$500
   â””â”€â”€ KR3: è™•ç†å»¶é² <500ms (P95)
```

---

## 9. Sprint Planning

### Sprint Capacity
- **Team**: 1 Backend + 0.5 ML
- **Duration**: 2 weeks
- **Velocity**: ~25 points / sprint
- **Availability**: 100%

### Sprint 1 (Week 1-2)

```
Sprint Goal: å»ºç«‹è³‡æ–™è™•ç† Pipeline èˆ‡åŸºç¤ Embedding

COMMITTED (22 points):
[P0] US-004: è³‡æ–™éæ¿¾ Pipeline (5 pts)
[P0] Embedding Service é–‹ç™¼ (5 pts)
[P0] Qdrant ç’°å¢ƒå»ºç½® (3 pts)
[P0] US-003: ç¡¬æ¨™ç±¤æ˜ å°„ (3 pts)
[P1] å½©å¦é ˜åŸŸ Seed Topics å®šç¾© (3 pts)
[P1] æ¸¬è©¦è³‡æ–™é›†æº–å‚™ (3 pts)

STRETCH (3 points):
[P2] æ•ˆèƒ½ Benchmark å»ºç«‹ (3 pts)
```

### Sprint 2 (Week 3-4)

```
Sprint Goal: å®Œæˆ Tagging Engine èˆ‡èªæ„æœå°‹

COMMITTED (24 points):
[P0] US-002: è»Ÿæ¨™ç±¤ç”Ÿæˆ (5 pts)
[P0] US-001: èªæ„æœå°‹ API (8 pts)
[P1] US-005: ä¸»é¡Œèšé¡ - Streaming (8 pts) â† updated
[P1] è©•ä¼°è³‡æ–™é›†æ¨™è¨» (3 pts)

STRETCH (4 points):
[P2] US-006: æ¨™ç±¤å›é¥‹æ©Ÿåˆ¶ (3 pts)
[P2] æ–‡ä»¶æ’°å¯« (1 pt)

Note: US-005 å¢åŠ  3 pts å› ç‚ºåŒ…å«ä¸‰å±¤ Clustering æ©Ÿåˆ¶
      - Layer 1: å³æ™‚åˆ†é…
      - Layer 2: å¾®æ‰¹æ¬¡ç™¼ç¾
      - Layer 3: æ¯æ—¥é‡èšé¡
```

---

## 10. Risks & Mitigations

| Risk | Probability | Impact | Mitigation Strategy |
|------|-------------|--------|---------------------|
| æ¨™ç±¤å“è³ªä¸é”æ¨™ | Medium | High | è¨­å®š 85% é–€æª»ï¼Œä¸é”æ¨™å‰‡è¿­ä»£èª¿æ•´ Prompt |
| LLM æˆæœ¬è¶…æ”¯ | Medium | Medium | ä¸‰å±¤éæ¿¾æ¸›å°‘ LLM å‘¼å«é‡ï¼Œè¨­å®šæˆæœ¬ä¸Šé™ |
| èšé¡å™ªéŸ³éé«˜ | High | Medium | æ¡ç”¨ Hybrid æ–¹æ³•ï¼ŒLLM ç¨®å­ä¸»é¡Œå„ªå…ˆ |
| ç³»çµ±å»¶é²éé«˜ | Low | Medium | é è¨ˆç®— Embeddingï¼ŒRedis å¿«å–ç†±é–€æŸ¥è©¢ |
| å½©å¦é ˜åŸŸä¸å…·ä»£è¡¨æ€§ | Low | High | é¸æ“‡è¨è«–é‡å¤§ä¸”å¤šæ¨£æ€§é«˜çš„é ˜åŸŸ |

---

## 11. Timeline & Milestones

| Milestone | Week | Deliverables | Success Criteria |
|-----------|------|--------------|------------------|
| Kickoff | W0 | éœ€æ±‚ç¢ºèªã€ç’°å¢ƒæº–å‚™ | åœ˜éšŠå°é½Š |
| Sprint 1 Complete | W2 | Pipeline + Embedding | è³‡æ–™å¯è™•ç† |
| Sprint 2 Complete | W4 | Tagging + Search | åŠŸèƒ½å¯ç”¨ |
| PoC Review | W4 | è©•ä¼°å ±å‘Š | æŒ‡æ¨™é”æ¨™ |
| Go/No-Go Decision | W5 | æ±ºç­–æœƒè­° | ä¸‹ä¸€æ­¥æ˜ç¢º |

---

## 12. Validation Checklist

### PoC å®Œæˆå®šç¾© (Definition of Done)

- [ ] å½©å¦é ˜åŸŸ 5 è¬ç­†è²¼æ–‡è™•ç†å®Œæˆ
- [ ] èªæ„æœå°‹ API å¯ç”¨
- [ ] æ¨™ç±¤ç›¸é—œæ€§ â‰¥85% (200 ç­†äººå·¥è©•ä¼°)
- [ ] æ¨™ç±¤è¦†è“‹ç‡ â‰¥90%
- [ ] èšé¡ä¸€è‡´æ€§ â‰¥80%
- [ ] è™•ç†å»¶é² <500ms (P95)
- [ ] ç¸½æˆæœ¬ <$500
- [ ] è©•ä¼°å ±å‘Šå®Œæˆ
- [ ] Go/No-Go æ±ºç­–å®Œæˆ

### è©•ä¼°æ–¹æ³•

| æŒ‡æ¨™ | è©•ä¼°æ–¹å¼ |
|-----|---------|
| æ¨™ç±¤ç›¸é—œæ€§ | PM + åˆ†æå¸«ç›²æ¸¬ 200 ç­†ï¼Œè©•åˆ† 1-5 |
| è¦†è“‹ç‡ | è‡ªå‹•è¨ˆç®—ï¼šæœ‰æ¨™ç±¤è²¼æ–‡ / ç¸½è²¼æ–‡ |
| èšé¡ä¸€è‡´æ€§ | æŠ½æ¨£ 10 å€‹ç¾¤çµ„ï¼Œè©•ä¼°ä¸»é¡Œä¸€è‡´æ€§ |
| å»¶é² | API ç›£æ§ P95 latency |

---

## 13. Open Questions

| # | Question | Owner | Status |
|---|----------|-------|--------|
| 1 | å½©å¦é ˜åŸŸ Seed Topics ç”±èª°å®šç¾©ï¼Ÿ | PM | Pending |
| 2 | è©•ä¼°è³‡æ–™é›†çš„æ¨™æº–ç­”æ¡ˆå¦‚ä½•ç”¢ç”Ÿï¼Ÿ | PM | Pending |
| 3 | æ˜¯å¦éœ€è¦èˆ‡ç¾æœ‰æœå°‹ç³»çµ±æ•´åˆï¼Ÿ | Eng | Pending |
| 4 | PoC æˆåŠŸå¾Œçš„ Phase 1 æ™‚ç¨‹ï¼Ÿ | PM | Pending |
| 5 | Kafka åŸºç¤è¨­æ–½æ˜¯å¦å·²å°±ç·’ï¼Ÿ | Infra | Pending |
| 6 | Flink Job éƒ¨ç½²ç’°å¢ƒï¼Ÿ(K8s / Standalone) | Infra | Pending |
| 7 | TRENDING Alert è¦ç™¼é€åˆ°å“ªå€‹é »é“ï¼Ÿ(Slack/Email) | PM | Pending |
| 8 | è§€å¯Ÿæ± è²¼æ–‡çš„ã€Œå‡ç´šã€é–¾å€¼å¦‚ä½•èª¿æ•´ï¼Ÿ | ML | Pending |

---

## 14. Appendix

### A. Technical Stack

| Component | Technology | Rationale |
|-----------|------------|-----------|
| **Data Ingestion** | | |
| Message Queue | Kafka | é«˜ååé‡ã€æ”¯æ´æµå¼è™•ç† |
| Stream Processing | Apache Flink | ä½å»¶é²ã€exactly-once èªæ„ |
| **Processing** | | |
| Embedding | paraphrase-multilingual-MiniLM-L12-v2 | å¤šèªè¨€æ”¯æ´ã€384 ç¶­ã€æœ¬åœ°å…è²» |
| LLM | GPT-4o-mini | æˆæœ¬æ•ˆç›Šæœ€ä½³ ($0.15/1M input) |
| Clustering | HDBSCAN + BERTopic | ç„¡éœ€é è¨­ç¾¤æ•¸ã€æ”¯æ´å™ªé»è­˜åˆ¥ |
| **Storage** | | |
| Vector DB | Qdrant | ä½å»¶é²ã€Hybrid Search |
| Centroid Cache | Redis | æ¯«ç§’ç´š Centroid æ¯”å° |
| Relational | PostgreSQL | Tagsã€Cluster æ­·å²è¨˜éŒ„ |
| **Scheduling** | | |
| Job Scheduler | APScheduler / Airflow | å¾®æ‰¹æ¬¡ + æ¯æ—¥é‡èšé¡æ’ç¨‹ |

### B. Cost Estimation

#### PoC éšæ®µ (5 è¬ç¯‡ï¼Œä¸€æ¬¡æ€§)

| Item | Unit Cost | Quantity | Total |
|------|-----------|----------|-------|
| LLM Soft Tagging | $0.00004/post | 50,000 | $2 |
| LLM Filtering (L3) | $0.00006/post | 20,000 | $1.2 |
| Cluster å‘½å | $0.01/cluster | 50 | $0.5 |
| Embedding | Free (local) | 50,000 | $0 |
| Qdrant | Free tier | - | $0 |
| **Total PoC** | | | **~$4** |

#### ç”Ÿç”¢ç’°å¢ƒ (æ¯æ—¥ 50 è¬ç¯‡ï¼ŒStreaming)

| Item | Unit Cost | Daily Qty | Daily Cost | Monthly Cost |
|------|-----------|-----------|------------|--------------|
| L1 Rules éæ¿¾ | Free | 500K | $0 | $0 |
| L2 ML è©•ä¼° | Free (local) | 375K | $0 | $0 |
| Embedding | Free (MiniLM) | 300K | $0 | $0 |
| LLM Soft Tagging | $0.00004 | 75K (15%) | $3.00 | $90 |
| Cluster å‘½å | $0.01 | 50 | $0.50 | $15 |
| Qdrant Cloud | - | - | - | $49 |
| Redis Cloud | - | - | - | $0 (free tier) |
| **Total** | | | **~$3.50** | **~$155** |

#### èˆ‡å…¨é‡ LLM è™•ç†çš„æˆæœ¬æ¯”è¼ƒ

| æ–¹æ¡ˆ | æ—¥æˆæœ¬ | æœˆæˆæœ¬ | èªªæ˜ |
|------|--------|--------|------|
| å…¨é‡ LLM | $20/day | $600/month | æ‰€æœ‰è²¼æ–‡éƒ½é€ LLM |
| ä¸‰å±¤éæ¿¾ (æœ¬æ–¹æ¡ˆ) | $3.5/day | $105/month | åƒ… 15% é€ LLM |
| **ç¯€çœ** | **$16.5/day** | **$495/month** | **82% æˆæœ¬é™ä½** |

### C. Related Documents

| Doc | Description |
|-----|-------------|
| [01-palantir-ontology-intro.md](./01-palantir-ontology-intro.md) | Palantir Ontology è¨­è¨ˆç†å¿µï¼ˆæœ¬ PoC éˆæ„Ÿä¾†æºï¼‰ |
| [02-sentiment-system-design.md](./02-sentiment-system-design.md) | æƒ…æ„Ÿåˆ†æç³»çµ±è¨­è¨ˆ |
| [06-llm-rag-architecture.md](./06-llm-rag-architecture.md) | LLM RAG æ¶æ§‹åƒè€ƒ |

### D. Clustering Implementation Examples

#### D.1 å³æ™‚åˆ†é… (Layer 1)

```python
class RealtimeClusterAssigner:
    def __init__(self, redis_client):
        self.redis = redis_client
        self.threshold = 0.75

    def assign(self, post_embedding: List[float]) -> dict:
        # å¾ Redis è¼‰å…¥æ‰€æœ‰ centroids
        centroids = self._load_centroids()

        best_match, best_score = None, -1
        for cluster_id, centroid in centroids.items():
            score = cosine_similarity(post_embedding, centroid)
            if score > best_score:
                best_score = score
                best_match = cluster_id

        if best_score >= self.threshold:
            return {"status": "assigned", "cluster_id": best_match, "score": best_score}
        else:
            return {"status": "pending", "nearest": best_match, "score": best_score}
```

#### D.2 å¾®æ‰¹æ¬¡èšé¡ (Layer 2)

```python
class MicroBatchClusterer:
    def process_batch(self, embeddings, post_texts):
        # 1. HDBSCAN èšé¡
        clusterer = hdbscan.HDBSCAN(min_cluster_size=50, min_samples=10)
        labels = clusterer.fit_predict(embeddings)

        new_clusters = []
        for label in set(labels):
            if label == -1: continue  # è·³éå™ªé»

            mask = labels == label
            centroid = embeddings[mask].mean(axis=0)

            # æª¢æŸ¥æ˜¯å¦èˆ‡ç¾æœ‰ cluster é‡ç–Š
            if not self._overlaps_existing(centroid, threshold=0.8):
                # LLM ç”Ÿæˆåç¨±
                name = self._generate_name_with_llm(post_texts[mask][:10])
                new_clusters.append({
                    "centroid": centroid,
                    "name": name,
                    "size": mask.sum()
                })

        return new_clusters
```

#### D.3 Cluster ç‹€æ…‹ç®¡ç†

```python
class ClusterLifecycleManager:
    def update_status(self, cluster_id: str):
        stats = self._get_cluster_stats(cluster_id)

        growth_rate = stats["today"] / max(stats["yesterday"], 1)

        if growth_rate > 3.0:  # 24hr æˆé•· > 200%
            return self._set_status(cluster_id, "TRENDING")
        elif stats["7day_total"] == 0:
            return self._set_status(cluster_id, "DECLINING")
        elif stats["total"] >= 500:
            return self._set_status(cluster_id, "ACTIVE")
        else:
            return self._set_status(cluster_id, "EMERGING")
```

### E. Simulation Example (è²¼æ–‡æ¨¡æ“¬)

```
ğŸ“ Post: "å¤šå·´èƒºè…®ç´…ä»Šå¤©ç¬¬ä¸€æ¬¡è©¦ç•«ï¼ŒçœŸçš„è¶…é¡¯æ°£è‰²ï¼"

Timeline:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
09:00  è²¼æ–‡é€²å…¥ç³»çµ±
       â†’ L1 Rules: PASS (éæŠ½ç/å»£å‘Š)
       â†’ L2 ML: risk_score = 78 (é«˜åƒ¹å€¼)
       â†’ Embedding ç”Ÿæˆ: [0.55, 0.41, -0.08, ...]

09:00  Clustering Layer 1 (å³æ™‚åˆ†é…)
       â†’ æ¯”å°ç¾æœ‰ Centroids
       â†’ æœ€é«˜ç›¸ä¼¼åº¦: 0.68 ("è…®ç´…æ¨è–¦")
       â†’ similarity < 0.75 â†’ PENDING
       â†’ é€å…¥ clustering.pending topic

10:00  Pending Pool ç´¯ç© 5,287 ç¯‡
       â†’ è§¸ç™¼ Layer 2 å¾®æ‰¹æ¬¡èšé¡

10:00  HDBSCAN ç™¼ç¾æ–° Cluster
       â†’ 312 ç¯‡è²¼æ–‡åŒ…å«ã€Œå¤šå·´èƒºã€ç›¸é—œè©
       â†’ è¨ˆç®— Centroid
       â†’ æ¯”å°ç¾æœ‰: æœ€é«˜ 0.52 (ä¸é‡ç–Š)
       â†’ LLM å‘½å: "å¤šå·´èƒºå¦"
       â†’ æ–° Cluster å»ºç«‹: cluster_0089 (EMERGING)

10:01  åŸè²¼æ–‡è¢«æ­¸å…¥ cluster_0089

15:00  cluster_0089 size: 1,847 (+492%)
       â†’ ç‹€æ…‹æ›´æ–°: EMERGING â†’ TRENDING ğŸ”¥
       â†’ Alert ç™¼é€çµ¦åˆ†æå¸«

Day+3  TRENDING ç‹€æ…‹æŒçºŒ
       â†’ LLM è©•ä¼°: confidence = 0.94
       â†’ å»ºç«‹ SoftTag: "å¤šå·´èƒºå¦"
       â†’ é—œè¯è‡³ HardTag: "ç¾å¦"
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
```

### F. References

- HDBSCAN Documentation: https://hdbscan.readthedocs.io/
- BERTopic Paper: https://arxiv.org/abs/2203.05794
- OpenAI API Pricing: https://openai.com/pricing
- Qdrant Documentation: https://qdrant.tech/documentation/

### G. Show Case: ç¾å¦é ˜åŸŸå®Œæ•´ç¯„ä¾‹

æœ¬ç¯€å±•ç¤ºä»¥ç¾å¦é ˜åŸŸ 5 è¬ç¯‡è²¼æ–‡ç‚ºä¾‹ï¼Œå¾å†·å•Ÿå‹•åˆ°æ­£å¸¸é‹è¡Œçš„å®Œæ•´æµç¨‹ã€‚

#### G.1 æ¸¬è©¦è³‡æ–™

```sql
-- å¾ Kolr DB æ’ˆå–ç¾å¦é ˜åŸŸè²¼æ–‡
SELECT id, content, likes, comments, platform, created_at
FROM posts
WHERE category = 'ç¾å¦'
  AND created_at >= '2024-01-01'
LIMIT 50000
```

ç¯„ä¾‹è²¼æ–‡ï¼š
```
#001: "é€™å€‹æ°£å¢ŠçœŸçš„è¶…æŒå¦ï¼8å°æ™‚ä¸è„«å¦"
#002: "è˜­è”»ç²‰åº•æ¶²é®ç‘•åŠ›è¶…å¼·ï¼Œç—˜ç–¤éƒ½é®ä½äº†"
#003: "é–‹æ¶çœ¼å½±ä¹Ÿèƒ½ç•«å‡ºå°ˆæ«ƒæ„Ÿï¼é€™ç›¤CPå€¼çˆ†è¡¨"
#004: "æ•æ„Ÿè‚Œçš„å§å¦¹çœ‹éä¾†ï¼Œé€™æ¬¾ä¸æœƒéæ•"
#005: "å¤šå·´èƒºè…®ç´…å¥½å¯æ„›ï¼Œå¤å¤©å°±æ˜¯è¦é€™å€‹é¡è‰²"
... (å…± 50,000 ç¯‡)
```

#### G.2 Phase 1: å†·å•Ÿå‹•

```
ç³»çµ±ç‹€æ…‹: Centroid åº«æ˜¯ç©ºçš„
Redis: cluster:centroids = {}

è™•ç†æµç¨‹:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è²¼æ–‡ #001 é€²å…¥                                              â”‚
â”‚ â”œâ”€ Embedding: [0.23, -0.15, 0.87, ...] âœ“                   â”‚
â”‚ â”œâ”€ Centroid æ¯”å°: Redis æ˜¯ç©ºçš„ï¼Œç„¡æ³•æ¯”å°                   â”‚
â”‚ â””â”€ â†’ Pending Pool                                          â”‚
â”‚                                                             â”‚
â”‚ è²¼æ–‡ #002 é€²å…¥                                              â”‚
â”‚ â”œâ”€ Embedding: [0.31, -0.08, 0.79, ...] âœ“                   â”‚
â”‚ â”œâ”€ Centroid æ¯”å°: Redis æ˜¯ç©ºçš„ï¼Œç„¡æ³•æ¯”å°                   â”‚
â”‚ â””â”€ â†’ Pending Pool                                          â”‚
â”‚                                                             â”‚
â”‚ ... é‡è¤‡è‡³ç¬¬ 5000 ç¯‡                                        â”‚
â”‚                                                             â”‚
â”‚ Pending Pool = 5000 ç¯‡ â†’ è§¸ç™¼ HDBSCANï¼                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

HDBSCAN åŸ·è¡Œçµæœï¼š
```
è¼¸å…¥: 5000 ç¯‡è²¼æ–‡çš„ Embedding
åŸ·è¡Œ: HDBSCAN(min_cluster_size=50)
è€—æ™‚: 8 ç§’

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Cluster ID â”‚ åç¨±       â”‚ è²¼æ–‡æ•¸ â”‚ é—œéµè©                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ cluster_01 â”‚ æŒå¦æ¸¬è©¦   â”‚ 523    â”‚ æŒå¦ã€ä¸è„«å¦ã€æ§æ²¹       â”‚
â”‚ cluster_02 â”‚ é®ç‘•æŠ€å·§   â”‚ 412    â”‚ é®ç‘•ã€ç—˜ç–¤ã€é»‘çœ¼åœˆ       â”‚
â”‚ cluster_03 â”‚ é–‹æ¶æ¨è–¦   â”‚ 389    â”‚ é–‹æ¶ã€CPå€¼ã€å¹³åƒ¹         â”‚
â”‚ cluster_04 â”‚ å°ˆæ«ƒæ¯”è¼ƒ   â”‚ 356    â”‚ å°ˆæ«ƒã€è˜­è”»ã€é›…è©©è˜­é»›     â”‚
â”‚ cluster_05 â”‚ çœ¼å¦æ•™å­¸   â”‚ 334    â”‚ çœ¼å½±ã€çœ¼ç·šã€è‡¥è ¶         â”‚
â”‚ cluster_06 â”‚ æ•æ„Ÿè‚Œ     â”‚ 298    â”‚ æ•æ„Ÿè‚Œã€éæ•ã€ä¸åˆºæ¿€     â”‚
â”‚ cluster_07 â”‚ å”‡å½©æ¨è–¦   â”‚ 276    â”‚ å”‡è†ã€å”‡é‡‰ã€é¡¯ç™½         â”‚
â”‚ cluster_08 â”‚ åº•å¦æ¨è–¦   â”‚ 265    â”‚ ç²‰åº•ã€æ°£å¢Šã€æœè²¼         â”‚
â”‚ cluster_09 â”‚ æ§æ²¹å®šå¦   â”‚ 243    â”‚ æ§æ²¹ã€å®šå¦ã€èœœç²‰         â”‚
â”‚ cluster_10 â”‚ è…®ç´…æ¨è–¦   â”‚ 221    â”‚ è…®ç´…ã€é¡¯æ°£è‰²ã€ä¿®å®¹       â”‚
â”‚ cluster_11 â”‚ å¸å¦æ¸…æ½”   â”‚ 198    â”‚ å¸å¦ã€æ´—é¢ä¹³ã€æ¯›å­”       â”‚
â”‚ cluster_12 â”‚ æ–°å“é–‹ç®±   â”‚ 187    â”‚ æ–°å“ã€é–‹ç®±ã€è©¦è‰²         â”‚
â”‚ cluster_13 â”‚ ä¿®å®¹æ‰“äº®   â”‚ 165    â”‚ ä¿®å®¹ã€æ‰“äº®ã€é«˜å…‰         â”‚
â”‚ cluster_14 â”‚ çœ‰æ¯›æ•™å­¸   â”‚ 154    â”‚ çœ‰ç­†ã€ç•«çœ‰ã€é‡ç”Ÿçœ‰       â”‚
â”‚ cluster_15 â”‚ é˜²æ›¬æ¨è–¦   â”‚ 143    â”‚ é˜²æ›¬ã€SPFã€ä¸æ³›ç™½        â”‚
â”‚ cluster_16 â”‚ éŸ“ç³»å¦å®¹   â”‚ 132    â”‚ éŸ“ç³»ã€éŸ“å¦ã€æ°´å…‰         â”‚
â”‚ cluster_17 â”‚ æ—¥ç³»å¦å®¹   â”‚ 121    â”‚ æ—¥ç³»ã€ç„¡è¾œã€è‡ªç„¶         â”‚
â”‚ cluster_18 â”‚ æˆåˆ†é»¨     â”‚ 115    â”‚ æˆåˆ†ã€ç…™é†¯èƒºã€ç»å°¿é…¸     â”‚
â”‚ cluster_19 â”‚ å›è³¼æ¨è–¦   â”‚ 108    â”‚ å›è³¼ã€ç©ºç“¶ã€æ„›ç”¨         â”‚
â”‚ cluster_20 â”‚ è¸©é›·è­¦å‘Š   â”‚ 98     â”‚ è¸©é›·ã€é›·å“ã€ä¸æ¨         â”‚
â”‚ cluster_21 â”‚ å¦å®¹æ•™å­¸   â”‚ 87     â”‚ æ•™å­¸ã€æ­¥é©Ÿã€æ–°æ‰‹         â”‚
â”‚ cluster_22 â”‚ åƒ¹æ ¼è¨è«–   â”‚ 76     â”‚ åƒ¹æ ¼ã€ä¾¿å®œã€åˆ’ç®—         â”‚
â”‚ cluster_23 â”‚ åŒ…è£è©•åƒ¹   â”‚ 65     â”‚ åŒ…è£ã€è³ªæ„Ÿã€è¨­è¨ˆ         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Noise      â”‚ (æœªåˆ†é¡)   â”‚ 534    â”‚ -                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ… å†·å•Ÿå‹•å®Œæˆï¼23 å€‹ Centroid å·²å­˜å…¥ Redis
```

#### G.3 Phase 2: æ­£å¸¸é‹è¡Œ

```
æ–°è²¼æ–‡: "é€™æ”¯ç«æ¯›è†è¶…æŒä¹…ï¼Œæ¸¸æ³³éƒ½ä¸æšˆæŸ“ï¼"

è™•ç†æµç¨‹:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1: Embedding                                           â”‚
â”‚ MiniLM â†’ [0.27, -0.10, 0.83, 0.38, ...]                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Step 2: Centroid æ¯”å°                                       â”‚
â”‚                                                             â”‚
â”‚ vs cluster_01 (æŒå¦æ¸¬è©¦): 0.91 âœ“ æœ€é«˜                      â”‚
â”‚ vs cluster_02 (é®ç‘•æŠ€å·§): 0.34                             â”‚
â”‚ vs cluster_03 (é–‹æ¶æ¨è–¦): 0.28                             â”‚
â”‚ ...                                                         â”‚
â”‚                                                             â”‚
â”‚ 0.91 â‰¥ 0.75 â†’ æ­¸å…¥ã€ŒæŒå¦æ¸¬è©¦ã€                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Step 3: LLM Soft Tagging                                    â”‚
â”‚                                                             â”‚
â”‚ {                                                           â”‚
â”‚   "soft_tags": ["ç«æ¯›è†", "é˜²æ°´", "æŒä¹…"],                  â”‚
â”‚   "sentiment": "positive"                                   â”‚
â”‚ }                                                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Step 4: å„²å­˜                                                â”‚
â”‚                                                             â”‚
â”‚ Qdrant: embedding + cluster_id âœ“                           â”‚
â”‚ PostgreSQL: soft_tags âœ“                                    â”‚
â”‚                                                             â”‚
â”‚ âœ… å®Œæˆï¼å»¶é² ~260ms                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### G.4 Phase 3: ç™¼ç¾æ–°è©±é¡Œã€Œå¤šå·´èƒºå¦ã€

```
09:00 - æ–°è©±é¡Œé–‹å§‹å‡ºç¾
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
è²¼æ–‡: "å¤šå·´èƒºè…®ç´…å¥½å¯æ„›ï¼Œå¤å¤©å°±æ˜¯è¦é€™å€‹é¡è‰²ï¼"

Centroid æ¯”å°:
â”œâ”€ vs cluster_01 (æŒå¦æ¸¬è©¦): 0.42
â”œâ”€ vs cluster_10 (è…®ç´…æ¨è–¦): 0.68 â† æœ€é«˜ä½†ä¸å¤ 
â””â”€ 0.68 < 0.75 â†’ Pending Pool

09:00 ~ 12:00 - é¡ä¼¼è²¼æ–‡æŒçºŒæ¹§å…¥
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
"å¤šå·´èƒºçœ¼å½±é…è‰²è¶…ç¹½ç´›"           â†’ Pending Pool
"ä»Šå¤©ç•«äº†å¤šå·´èƒºå¦å‡ºé–€ï¼Œå¥½å¤šäººå•" â†’ Pending Pool
"å¤šå·´èƒºé¢¨ç©¿æ­é…é€™å€‹å¦è¶…æ­"       â†’ Pending Pool
"è·Ÿé¢¨ç•«å¤šå·´èƒºè…®ç´…ï¼Œå¿ƒæƒ…éƒ½è®Šå¥½äº†" â†’ Pending Pool
...

12:00 - Pending Pool è§¸ç™¼ HDBSCAN
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Pending Pool = 5,234 ç¯‡
â”œâ”€ å…¶ä¸­ã€Œå¤šå·´èƒºã€ç›¸é—œ: 312 ç¯‡
â””â”€ å…¶ä»–é›¶æ•£ä¸»é¡Œ: 4,922 ç¯‡

HDBSCAN ç™¼ç¾æ–° Cluster:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ cluster_24 â”‚ å¤šå·´èƒºå¦   â”‚ 312    â”‚ å¤šå·´èƒºã€ç¹½ç´›ã€é…è‰²ã€å¤æ—¥ â”‚
â”‚ cluster_25 â”‚ å½ç´ é¡     â”‚ 87     â”‚ å½ç´ é¡ã€è‡ªç„¶ã€è£¸å¦       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ… æ–° Centroid å·²åŠ å…¥ Redis

12:01 ä¹‹å¾Œ - ã€Œå¤šå·´èƒºã€è²¼æ–‡å¯å³æ™‚æ­¸é¡
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ–°è²¼æ–‡: "å¤šå·´èƒºè‰²çœ¼å½±ç›¤æ¨è–¦ï¼é€™ç›¤èª¿è‰²è¶…æ–¹ä¾¿"

Centroid æ¯”å°:
â””â”€ vs cluster_24 (å¤šå·´èƒºå¦): 0.93 âœ“

âœ… å³æ™‚æ­¸å…¥ã€Œå¤šå·´èƒºå¦ã€
```

#### G.5 æœå°‹æ•ˆæœå±•ç¤º

| æœå°‹è© | å‚³çµ±é—œéµå­— | èªæ„æœå°‹ | æå‡ |
|--------|-----------|----------|------|
| "åº•å¦æŒä¹…" | 234 ç¯‡ | 1,847 ç¯‡ | 7.9x |
| "æ²¹è‚Œå¤å¤©ä¸è„«å¦" | 12 ç¯‡ | 892 ç¯‡ | 74x |
| "å¹³åƒ¹å¥½ç”¨çœ¼å½±" | 45 ç¯‡ | 623 ç¯‡ | 13.8x |

æ–°èˆˆè©±é¡Œæœå°‹:
```
æœå°‹: "æœ€è¿‘æµè¡Œä»€éº¼å¦"

å‚³çµ±ç³»çµ±: ç„¡æ³•å›ç­”

æˆ‘å€‘çš„ç³»çµ±:
â”œâ”€ æ‰¾ TRENDING ç‹€æ…‹çš„ Cluster
â”œâ”€ cluster_24 (å¤šå·´èƒºå¦) - 24hr æˆé•· 320% ğŸ”¥
â””â”€ è‡ªå‹•æ¨è–¦ã€Œå¤šå·´èƒºå¦ã€ç›¸é—œè²¼æ–‡
```

#### G.6 æˆæœå ±å‘Š

```
ğŸ“Š æ•¸æ“šè¦æ¨¡
â”œâ”€ è™•ç†è²¼æ–‡: 50,000 ç¯‡
â”œâ”€ è™•ç†æ™‚é–“: 4 å°æ™‚ (å«å†·å•Ÿå‹•)
â””â”€ ç¸½æˆæœ¬: $3.50

ğŸ“ˆ Cluster çµ±è¨ˆ
â”œâ”€ ç™¼ç¾ Cluster: 25 å€‹
â”œâ”€ æœ€å¤§: æŒå¦æ¸¬è©¦ (4,521 ç¯‡)
â”œâ”€ æœ€å°: åŒ…è£è©•åƒ¹ (65 ç¯‡)
â”œâ”€ å™ªé»æ¯”ä¾‹: 11.2%
â””â”€ æ–°èˆˆè©±é¡Œ: 2 å€‹ (å¤šå·´èƒºå¦ã€å½ç´ é¡)

âœ… æŒ‡æ¨™é”æˆ
â”œâ”€ æ¨™ç±¤ç›¸é—œæ€§: 87% (ç›®æ¨™ â‰¥85%) âœ“
â”œâ”€ æ¨™ç±¤è¦†è“‹ç‡: 92% (ç›®æ¨™ â‰¥90%) âœ“
â”œâ”€ èšé¡ä¸€è‡´æ€§: 84% (ç›®æ¨™ â‰¥80%) âœ“
â””â”€ è™•ç†å»¶é²: 263ms P95 (ç›®æ¨™ <500ms) âœ“

ğŸ’° æˆæœ¬æ˜ç´°
â”œâ”€ Embedding (MiniLM): $0
â”œâ”€ LLM Soft Tagging: $3.00
â”œâ”€ Cluster å‘½å: $0.50
â””â”€ ç¸½è¨ˆ: $3.50
```

#### G.7 Demo è…³æœ¬

```
1. å±•ç¤ºç©ºç³»çµ± (0 Cluster)
2. é¤µå…¥ 5000 ç¯‡è²¼æ–‡ â†’ è§¸ç™¼ HDBSCAN â†’ ç”¢ç”Ÿ 23 å€‹ Cluster
3. å³æ™‚è™•ç†æ–°è²¼æ–‡ â†’ å±•ç¤º Centroid æ¯”å° (< 10ms)
4. æœå°‹ã€ŒæŒå¦ã€â†’ å±•ç¤ºèªæ„æœå°‹çµæœ vs é—œéµå­—æœå°‹
5. é¤µå…¥ã€Œå¤šå·´èƒºã€ç›¸é—œè²¼æ–‡ â†’ ç´¯ç© â†’ ç™¼ç¾æ–° Cluster
6. å†æ¬¡æœå°‹ â†’ æ–°è©±é¡Œå¯è¢«æ‰¾åˆ°
7. å±•ç¤º Dashboard: Cluster åˆ†ä½ˆã€TRENDING è©±é¡Œã€æˆæœ¬å ±å‘Š
```

---

## Changelog

| Version | Date | Author | Changes |
|---------|------|--------|---------|
| v1.0 | 2026-02-03 | Kolr Product Team | Initial draft |
| v1.1 | 2026-02-03 | Kolr Product Team | æ–°å¢æµå¼æ¶æ§‹è¨­è¨ˆ (5.1)ã€Streaming Cost Model (5.2)ã€ä¸‰å±¤ Clustering å¯¦ä½œ (5.3)ã€Cluster ç”Ÿå‘½é€±æœŸç®¡ç†ã€Clusterâ†’SoftTag è½‰æ›æ©Ÿåˆ¶ã€å¯¦ä½œç¯„ä¾‹ç¨‹å¼ç¢¼ (Appendix D)ã€è²¼æ–‡æ¨¡æ“¬æµç¨‹ (Appendix E)ã€æ›´æ–°æˆæœ¬ä¼°ç®— |
| v1.2 | 2026-02-03 | Kolr Product Team | æ–°å¢å–®ç¯‡è²¼æ–‡è™•ç†æµç¨‹ (5.4)ï¼šå®Œæ•´è™•ç†æ™‚é–“ç·šã€å„æ­¥é©Ÿè©³è§£ (Kafkaâ†’Rulesâ†’RiskScoreâ†’Embeddingâ†’Clusterâ†’LLMâ†’Storage)ã€ä¸åŒ Risk Score è™•ç†è·¯å¾‘å°ç…§è¡¨ã€è™•ç†çµæœ JSON ç¯„ä¾‹ |
| v1.3 | 2026-02-03 | Kolr Product Team | æ–°å¢ç¾å¦ Show Case (Appendix G)ï¼šå†·å•Ÿå‹•æµç¨‹ (5000ç¯‡â†’23 Cluster)ã€æ­£å¸¸é‹è¡Œç¯„ä¾‹ã€æ–°è©±é¡Œç™¼ç¾ (å¤šå·´èƒºå¦)ã€æœå°‹æ•ˆæœå°æ¯” (7.9x~74x æå‡)ã€æˆæœå ±å‘Šã€Demo è…³æœ¬ |
